@underlayer-focused-bgcolor: #eaf3ff;
@underlayer-target-bgcolor: #fff1c7;
@underlayer-newest-bgcolor: #edffdb;
@underlayer-new-bgcolor: @underlayer-newest-bgcolor;

.cd-underlayer {
  position: absolute;
  z-index: 0;

  &-newest {
    background-color: @underlayer-newest-bgcolor;
  }

  &-new {
    background-color: @underlayer-new-bgcolor;
  }
}

.cd-linksUnderlayer {
  position: absolute;
  display: none;

  &-focused {
    display: block;
  }

  &-wrapper {
    position: absolute;
    z-index: 1;
    bottom: 3px;
    right: 0;
    text-align: right;
    font-size: 14px;
    line-height: normal;  /* At least, for Timeless skin. */
  }

  &-gradient {
    width: 1.4em;
    display: inline-block;
    padding: 1px;  /* Compensation for 1px button borders */
    vertical-align: middle;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
  }

  &-text {
    display: inline-block;
    background-color: @underlayer-focused-bgcolor;
    padding: 0 0.5em 0 1em;

    .oo-ui-buttonWidget {
      margin-right: 0;
    }

    .cd-msgButton:not(:first-child) {
      margin-left: 1em;
    }
  }
}

.cd-msgButton.oo-ui-buttonElement-frameless.oo-ui-labelElement,
.cd-sectionButton.oo-ui-buttonElement-frameless.oo-ui-labelElement {
  > .oo-ui-buttonElement-button {
    padding: 0;
  }

  &:first-child {
    margin-left: 0;
  }
}

.cd-button.oo-ui-buttonElement-frameless.oo-ui-widget-enabled > .oo-ui-buttonElement-button:hover,
.cd-button.oo-ui-buttonElement-frameless.oo-ui-widget-enabled > .oo-ui-buttonElement-button:active {
  background-color: transparent;
}

.cd-sectionMenuItemsDivider {
  color: #54595d;
}

.cd-replyButtonContainer {
  margin-left: -1px;
}

.cd-msgForm + .cd-replyButtonContainer,
.ruwiki-closedDiscussion + .cd-replyButtonContainerContainer {
  margin-top: 0.5em;
}

.cd-sectionButton {
  padding-top: 0;
  padding-bottom: 0;
}

.cd-addSubsectionButtonContainer {
  margin-top: 0.625em;
}

.cd-msgForm {
  &.cd-msgForm {
    margin: 0.5em 0 0 0;
    clear: left;
    padding-bottom: 1px;  /* To prevent the scrollbar from showing up */
  }

  &.cd-msgForm-addSection,
  &.cd-msgForm-addSubsection,
  &.cd-msgForm-replyInSection:not(.cd-msgForm-inNumberedList),
  &.cd-msgForm-msgOpeningSection {
    margin-top: 1em;
  }

  &.cd-msgLevel > .cd-msgForm-wrapper {
    padding-left: 1.5em;
  }

  > form {
    overflow: hidden;  /* To prevent falling through where there are floating elements. */
    padding-bottom: 1px;
  }

  .cd-headingInput {
    margin-bottom: 0.25em;
  }

  .oo-ui-textInputWidget {
    max-width: none;
  }

  .cd-summaryInput {
    margin-top: 0.25em;
  }

  .cd-checkboxesContainer {
    margin-top: 0.5em;
    line-height: 0;
  }

  .cd-checkboxesContainer .oo-ui-fieldLayout {
    margin-right: 1em;

    &:last-child {
      margin-right: 0;
    }
  }

  .cd-buttonsContainer {
    margin-top: 0.5em;
  }

  .cd-leftButtonsContainer {
    float: left;
  }

  .cd-rightButtonsContainer {
    float: right;
  }

  .cd-rightButtonsContainer > .oo-ui-buttonWidget:last-child {
    margin-right: -0.3125em;
  }

  .oo-ui-buttonElement-framed > .oo-ui-buttonElement-button {
    vertical-align: middle;
  }

  table.diff {
    margin-bottom: 0.5em;
  }

  &-wrapper {
    overflow: hidden;
    margin-left: -0.5em;
    padding-left: 0.5em;
    padding-bottom: 1px;
  }

  & + .cd-msgLevel,
  & + dd > .cd-msgLevel:first-child,
  & + li > .cd-msgLevel:first-child {
    /* Neutralize the hole which would otherwise be created by the margin-top of a nested message */
    padding-top: 0.1px;
  }

  & + .cd-msgForm {
    padding-top: 0.5em;
  }

  .wikiEditor-ui-toolbar {
    background-image: none;
    background-color: #eaecf0;

    .sections .section {
      background-color: #f8f9fa;
    }

    .booklet .index .current {
      background-color: #eaecf0;
    }

    .group,
    .sections .section {
      border-color: #c8ccd1;
    }
  }

  .wikiEditor-ui .wikiEditor-ui-view,
  .wikiEditor-ui .wikiEditor-ui-top {
    border-color: #c8ccd1;
  }
}

dd.cd-msgForm.cd-msgLevel.cd-msgLevel {
  margin-left: 2em;
}

.cd-msgForm-noIndentation.cd-msgForm-noIndentation.cd-msgForm-noIndentation {
  padding-top: 1em;
}

li.cd-msgForm-noIndentation.cd-msgForm-noIndentation.cd-msgForm-noIndentation {
  margin: -0.5em 0 0 -2em;
}

dd.cd-msgForm-noIndentation.cd-msgForm-noIndentation.cd-msgForm-noIndentation {
  margin: -0.5em 0 0 -1em;
}

.cd-previewArea {
  margin-bottom: 0.5em;

  > .mw-parser-output > *:first-child {
    margin-top: 0;
  }

  &:empty {
    margin-bottom: 0;
  }
}

.cd-previewArea, .cd-infoArea {
  position: relative;
}

.cd-closeButton {
  position: absolute;
  top: 0;
  right: 0;
  width: 24px;
  height: 24px;
  background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+Cgk8ZyBpZD0iY2xvc2UiPgoJCTxwYXRoIGlkPSJjcm9zcyIgZD0iTTE3LjQgOC4xYy44LS44LjgtMiAwLTIuOEwxMiAxMC44IDcuNCA2LjIgNiA3LjZsNC42IDQuNi00IDRjLS44LjgtLjggMiAwIDIuOGw1LjQtNS40IDQuNiA0LjYgMS40LTEuNC00LjYtNC42eiIvPgoJPC9nPgo8L3N2Zz4=);
}

.cd-info {
  margin: 0.25em 0;

  .oo-ui-iconElement.oo-ui-iconElement {
    position: relative;
    top: -1px;
    margin-right: 0.25em;
  }

  &-alert {
    color: #c00;
  }
}

.cd-popupsOverlay {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  font-size: 14px;
}

.cd-insertButtons {
  margin-left: -0.375em;

  &-item {
    font: bold 1.1em monospace;
    color: #222;
    padding: 0.15em 0.375em;
    white-space: nowrap;

    &:hover, &:focus {
      text-decoration: none;
      color: #222;
    }

    &:active {
      background-color: #eaecf0;
    }
  }
}


.cd-msgLevel .paragraphbreak {
  margin-top: 0.25em !important;
}

.cd-msgPart-first {
  margin-top: 0.5em;
}

.cd-msgPart-last {
  margin-bottom: 0.5em;
}

ol > li.cd-msgPart-first {
  margin-top: 0;
}

ol > li.cd-msgPart-last {
  margin-bottom: 0.1em;
}

.cd-msgLevel.cd-msgLevel:not(ol) {
  margin: 0 0 0 1em;
  border-left: 1px solid #c8ccd1;
}

ul.cd-msgLevel {
  list-style-type: none;
  list-style-image: none;
  padding-left: 1em;
}

dl.cd-msgLevel.cd-msgLevel > dd {
  margin-left: 1em;
}

.ruwiki-msgIndentation-minus1level {
  margin-left: -2em !important;
}


#cd-updatePanel {
  position: fixed;
  bottom: 45%;
  left: 0;
  z-index: 5;
  width: 32px;
  background-color: #fff;
  cursor: pointer;
  border: 1px solid #a2a9b1;
  border-radius: 2px 0 0 2px;
  border-left: 0;
  opacity: 0.53;  /* Enough to make it pass AA level for contrast ratio on Vector. */
  -moz-user-select: none;
  -webkit-user-select: none;
  user-select: none;

  &:hover {
    opacity: 1;
  }

  &-refreshButton {
    display: block;
    padding: 4px;
    width: 24px;
    height: 24px;
    background: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'36\' height=\'36\' viewBox=\'0 0 36 36\'%3E%3Cpath d=\'M0 0h36v36h-36z\' fill=\'none\'/%3E%3Cpath d=\'M26.47 9.53c-2.17-2.18-5.15-3.53-8.47-3.53-6.63 0-12 5.37-12 12s5.37 12 12 12c5.94 0 10.85-4.33 11.81-10h-3.04c-.91 4.01-4.49 7-8.77 7-4.97 0-9-4.03-9-9s4.03-9 9-9c2.49 0 4.71 1.03 6.34 2.66l-4.34 4.34h10v-10l-3.53 3.53z\'/%3E%3C/svg%3E") center center/24px 24px no-repeat;
  }

  &-prevButton,
  &-nextButton {
    position: relative;
    display: block;
    height: 29px;
    margin-top: 1px;
    color: #000;
    text-align: center;
    font-size: 13px;
  }

  &-prevButton {
    background: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'24\' height=\'24\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M12 6.5l8.9 8.9c-.8.8-2 .8-2.8 0L12 9.3l-6.1 6c-.8.8-2 .8-2.8 0L12 6.5z\'/%3E%3C/svg%3E") center center/16px 16px no-repeat;
  }

  &-nextButton {
    background: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'24\' height=\'24\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M12 16l8.9-8.9c-.8-.8-2-.8-2.8 0L12 13.2l-6.1-6c-.8-.8-2-.8-2.8 0L12 16z\'/%3E%3C/svg%3E") center center/16px 16px no-repeat;

    &.cd-updatePanel-nextButton-digit {
      height: 15px;
      padding: 7px 0;
      background: none;
    }
  }

  &-prevButton:before,
  &-nextButton:before {
    position: absolute;
    top: -1px;
    left: 4px;
    margin: 0 auto 1px;
    width: 24px;
    height: 0;
    border-top: solid 1px #a2a9b1;
    content: "";
  }

  &-refreshButton:hover,
  &-prevButton:hover,
  &-nextButton:hover {
    background-color: #f3f4f5;
  }
}


.cd-loadingOverlay {
  position: fixed;
  z-index: 102;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: rgba(255, 255, 255, 0.5);
}

@logo-width: 324px;
@logo-height: 40px;

.cd-loadingPopup {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 1.7em;
  z-index: 111;  /* z-index окон в OOUI + 10 */
  width: @logo-width;
  margin: 0 auto;
  padding: 17px 17px 14px 17px;
  background-color: #fff;
  border-radius: 2px;
  /* border: 1px solid #c8ccd1; */
}

.cd-loadingPopup-logo {
  width: @logo-width;
  height: @logo-height;
  display: block;
  margin: 0 auto;
}


/* Skin fixes */
.skin-monobook {
  .cd-underlayer {
    z-index: -1;
  }

  .cd-linksUnderlayer-wrapper {
    z-index: 2;
    bottom: 2px;
  }

  .cd-msgButton.oo-ui-buttonElement.oo-ui-labelElement > .oo-ui-buttonElement-button > .oo-ui-labelElement-label {
    line-height: 1.172em;
  }
}

/* Hack for Timeless skin */
.skin-timeless .mw-body-content {
  position: relative;
}
